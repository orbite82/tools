---
- name: Preparing Workstation 2
  hosts: localhost
  connection: local 
  become: true 
  tasks: 
          - name: Install aptitude 
            apt: name=aptitude state=latest update_cache=yes force_apt_get=yes 

          - name: Install required dependencies 
            apt: name={{item}} state=latest update_cache=yes 
            loop: [ 'apt-transport-https', 'ca-certificates', 'curl', 'software-properties-common', 'python3-pip', 'virtualenv', 'python3-setuptools'] 
          - name: Add Docker GPG apt Key 
            apt_key: 
                    url: https://download.docker.com/linux/ubuntu/gpg 
                    state: present 

          - name: Add Docker Repository 
            apt_repository: 
                    repo: deb https://download.docker.com/linux/ubuntu focal stable 
                    state: present 

          - name: Update apt and install Docker CE 
            apt: update_cache=yes name=docker-ce state=latest
          - name: Install Docker Module for Python 
            pip: 
                    name: docker

           - name: Install prerequisites for docker-compose
            apt:
              name: ['python3-pip', 'python3-setuptools', 'virtualenv']

          - name: Install docker-compose
            pip:
                    name: docker-compose